/*!
 * FunLazy v1.0.0
 * Copyright (C) 2020, ZG
 * Released under the MIT license.
 */
!function(d,c){"function"===typeof define&&define.amd?define(["jquery"],function(g){return c(d,g)}):"undefined"!==typeof module&&"object"===typeof exports?c(d,require("jquery")):c(d,d.jQuery)}("undefined"!==typeof window?window:this,function(d,c){function g(c,a,d){d?c.attr("src",a):c.css("backgroundImage","url("+a+")")}!function(){if("undefined"===typeof jQuery)throw Error("FunLazy \u4f9d\u8d56 jQuery");var d=c.fn.jquery.split(".");if(1===~~d[0]&&9>~~d[1])throw Error("Funlazy \u8981\u6c42 jQuery 1.9.0+");}();var k=c(d),t=c(document),q="function"===typeof IntersectionObserver,m={container:null,effect:"show",placeholder:"data:img/jpg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAA1BMVEXd3d3u346CAAAADUlEQVR42gECAP3/AAAAAgABUyucMAAAAABJRU5ErkJggg\x3d\x3d",errorPlaceholder:"",threshold:0,width:null,height:null,axis:"y",eventType:"",onSuccess:c.noop,onError:c.noop};c.FunLazy=function(d){var a=c.extend({},m,d),r=c.isFunction(a.onSuccess),u=c.isFunction(a.onError),h=c(a.container||"body");h.find("[data-funlazy]").each(function(){function d(e){var b=e.get(0),d=c.Deferred();if(e.data("funlazyLoaded"))return d.resolve(),d;c("\x3cimg\x3e").on({load:function(){g(e,l,n);if("fadeIn"===a.effect.substring(0,6)){var c=a.effect.match(/\((.*)\)/);e.css("visibility","hidden").hide().fadeIn(c?parseInt(c[1]):400);try{b.style.removeProperty("visibility")}catch(v){e.css("visibility","visible")}}if(!e.data("funlazyLoaded")&&r)a.onSuccess(b,l);e.data("funlazyLoaded",!0);d.resolve()},error:function(){"string"===typeof a.errorPlaceholder&&g(e,a.errorPlaceholder,n);if(!e.data("funlazyFailed")&&u)a.onError(b,l);e.data("funlazyFailed",!0);d.reject()}}).attr("src",l);return d}function p(){if(!b.data("funlazyLoaded"))if(q){var e=c.isNumeric(a.threshold)&&0<a.threshold?a.threshold:0,g=new IntersectionObserver(function(a){c.each(a,function(a,b){a=c(b.target);b.isIntersecting&&d(a).done(function(){g.unobserve(b.target)})})},{root:a.container?h.get(0):null,threshold:[0],rootMargin:"0px "+("x"===a.axis?e:0)+"px "+("y"===a.axis?e:0)+"px 0px"});g.observe(m)}else if(a.container)h.length&&(e=b.position(),"x"===a.axis&&(f=h.scrollLeft(),f<e.left+a.threshold+b.width()&&h.width()+f>e.left-a.threshold&&d(b)),"y"===a.axis&&(f=h.scrollTop(),f<e.top+a.threshold+b.height()&&h.height()+f>e.top-a.threshold&&d(b)));else{e=b.offset();if("x"===a.axis){var f=k.scrollLeft();f<e.left+a.threshold+b.width()&&k.width()+f>e.left-a.threshold&&d(b)}"y"===a.axis&&(f=k.scrollTop(),f<e.top+a.threshold+b.height()&&k.height()+f>e.top-a.threshold&&d(b))}}var b=c(this),m=this,l=c.trim(b.attr("data-funlazy"));if(!l||b.is(":hidden")||b.parents().filter(":hidden").length||"0"===b.css("opacity"))b.data("funlazyOff",!0);else{var n=b.is("img");"string"===typeof a.placeholder&&g(b,a.placeholder,n);a.width&&b.css("width","string"===typeof a.width?a.width:a.width+"px");a.height&&b.css("height","string"===typeof a.height?a.height:a.height+"px");if(a.eventType.match(/(click|dblclick|mouseover)/))t.on(a.eventType+".funlazy",function(a){c(a.target).is(b)&&d(b)});else p();if(!q&&!a.eventType)(a.container?c(a.container):k).on({"scroll.funlazy":p,"resize.funlazy":p})}})}});